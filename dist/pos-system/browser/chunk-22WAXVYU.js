import{a as U}from"./chunk-RWMW3244.js";import{b as D,e as $,h as B,i as G,j as L,l as z}from"./chunk-G7KW3K4P.js";import{k as O,m as q,n as N,q as j,r as W}from"./chunk-VC7NPOL3.js";import{$ as M,Aa as a,Ba as V,Qa as u,Sa as s,Va as t,Wa as i,Xa as f,Za as y,a as I,ab as x,b as P,bb as m,gb as r,hb as h,ia as p,ib as _,ja as g,jb as C,kb as k,lb as S,mb as E,ob as T,pb as F,rb as v,tb as b,xa as w}from"./chunk-O45W6FPX.js";var A=(o,c)=>({"ml-64":o,"ml-16":c});function H(o,c){if(o&1&&(t(0,"div",21),r(1),i()),o&2){let e=m().$implicit;a(),_(" Low Stock: ",e.stock," ")}}function J(o,c){if(o&1){let e=y();t(0,"div",11),x("click",function(){let n=p(e).$implicit,l=m();return g(l.addToCart(n))}),t(1,"div",12),f(2,"img",13),u(3,H,2,1,"div",14),i(),t(4,"div",15)(5,"h3",16),r(6),i(),t(7,"p",17),r(8),i(),t(9,"div",18)(10,"span",19),r(11),v(12,"number"),i(),t(13,"span",20),r(14),i()()()()}if(o&2){let e=c.$implicit;a(2),s("src",e.image||"assets/images/placeholder.png",w)("alt",e.name),a(),s("ngIf",e.stock<=10),a(3),h(e.name),a(2),h(e.category),a(3),_("EGP ",b(12,7,e.price,"1.2-2"),""),a(3),_("Stock: ",e.stock,"")}}function K(o,c){o&1&&(t(0,"div",22),r(1,"No items in cart"),i())}function Q(o,c){if(o&1){let e=y();t(0,"div",35)(1,"div",36)(2,"div",37),f(3,"img",38),i(),t(4,"div")(5,"h4",39),r(6),i(),t(7,"p",40),r(8),v(9,"number"),i()()(),t(10,"div",41)(11,"button",42),x("click",function(){let n=p(e).$implicit,l=m(2);return g(l.decrement(n))}),r(12," - "),i(),t(13,"span",43),r(14),i(),t(15,"button",42),x("click",function(){let n=p(e).$implicit,l=m(2);return g(l.increment(n))}),r(16," + "),i(),t(17,"button",44),x("click",function(){let n=p(e).$implicit,l=m(2);return g(l.remove(n))}),r(18," \xD7 "),i()()()}if(o&2){let e=c.$implicit;a(3),s("src",e.image||"assets/images/placeholder.png",w)("alt",e.name),a(3),h(e.name),a(2),C("EGP ",b(9,6,e.price,"1.2-2")," x ",e.quantity,""),a(6),h(e.quantity)}}function R(o,c){if(o&1&&(t(0,"option",30),r(1),i()),o&2){let e=c.$implicit;s("ngValue",e.id),a(),C(" ",e.name," (",e.email,") ")}}function X(o,c){if(o&1){let e=y();t(0,"div",23),u(1,Q,19,9,"div",24),t(2,"div",25)(3,"div",26)(4,"span"),r(5,"Total:"),i(),t(6,"span",27),r(7),v(8,"number"),i()(),t(9,"div",23)(10,"div")(11,"label",28),r(12,"Customer"),i(),t(13,"select",29),E("ngModelChange",function(n){p(e);let l=m();return S(l.selectedCustomerId,n)||(l.selectedCustomerId=n),g(n)}),t(14,"option",30),r(15,"Walk-in Customer"),i(),u(16,R,2,3,"option",31),i()(),t(17,"div")(18,"label",28),r(19,"Payment Method"),i(),t(20,"select",29),E("ngModelChange",function(n){p(e);let l=m();return S(l.paymentMethod,n)||(l.paymentMethod=n),g(n)}),t(21,"option",32),r(22,"Cash"),i(),t(23,"option",33),r(24,"Card"),i()()(),t(25,"button",34),x("click",function(){p(e);let n=m();return g(n.checkout())}),r(26," Checkout "),i()()()()}if(o&2){let e=m();a(),s("ngForOf",e.cart),a(6),_("EGP ",b(8,6,e.getTotal(),"1.2-2"),""),a(6),k("ngModel",e.selectedCustomerId),a(),s("ngValue",null),a(2),s("ngForOf",e.customers),a(4),k("ngModel",e.paymentMethod)}}var re=(()=>{class o{constructor(e){this.state=e,this.products=[],this.customers=[],this.cart=[],this.selectedCustomerId=null,this.paymentMethod="cash",this.isSidebarCollapsed=!1}ngOnInit(){this.state.products$.subscribe(e=>{this.products=e,console.log(this.products)}),this.state.customers$.subscribe(e=>{this.customers=e})}addToCart(e){if(e.stock<=0){alert("This product is out of stock!");return}let d=this.cart.find(n=>n.id===e.id);if(d){if(d.quantity>=e.stock){alert("Cannot add more items. Stock limit reached!");return}d.quantity++}else this.cart.push(P(I({},e),{quantity:1}))}increment(e){if(e.quantity>=e.stock){alert("Cannot add more items. Stock limit reached!");return}e.quantity++}decrement(e){e.quantity>1&&e.quantity--}remove(e){this.cart=this.cart.filter(d=>d.id!==e.id)}getTotal(){return this.cart.reduce((e,d)=>e+d.price*d.quantity,0)}checkout(){if(this.cart.length===0)return;let e=this.cart.map(n=>({productId:n.id,quantity:n.quantity,price:n.price})),d={id:Date.now(),items:e,total:Number(this.getTotal()),status:"completed",paymentMethod:this.paymentMethod,date:new Date().toISOString(),customerId:this.selectedCustomerId||void 0};this.state.addOrder(d),alert("Checkout successful!"),this.cart=[],this.selectedCustomerId=null,this.paymentMethod="cash"}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}static{this.\u0275fac=function(d){return new(d||o)(V(U))}}static{this.\u0275cmp=M({type:o,selectors:[["app-pos"]],standalone:!0,features:[T],decls:15,vars:7,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-3","gap-6"],[1,"card","col-span-2","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-2","gap-4"],["class","bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","col-span-1","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow"],["class","text-gray-500",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"transition-all","duration-300",3,"ngClass"],[1,"bg-white","dark:bg-gray-700","rounded-lg","shadow-md","overflow-hidden","cursor-pointer","hover:shadow-lg","transition-shadow","duration-200",3,"click"],[1,"relative","h-40","bg-gray-100","dark:bg-gray-600"],[1,"w-full","h-full","object-contain","p-2",3,"src","alt"],["class","absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",4,"ngIf"],[1,"p-4"],[1,"font-medium","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"flex","justify-between","items-center"],[1,"text-lg","font-bold","text-[rgb(230,0,0)]"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"absolute","top-2","right-2","bg-red-500","text-white","text-xs","px-2","py-1","rounded-full"],[1,"text-gray-500"],[1,"space-y-4"],["class","flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",4,"ngFor","ngForOf"],[1,"mt-4","p-4","bg-gray-50","dark:bg-gray-700","rounded-lg"],[1,"flex","justify-between","font-bold","text-lg","mb-4"],[1,"text-[rgb(230,0,0)]"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["value","cash"],["value","card"],[1,"w-full","px-4","py-3","bg-[rgb(230,0,0)]","text-white","rounded-lg","hover:bg-red-700","font-medium",3,"click"],[1,"flex","justify-between","items-center","p-4","bg-gray-50","dark:bg-gray-700","rounded-lg"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","bg-gray-100","dark:bg-gray-600","rounded-lg","overflow-hidden"],[1,"w-full","h-full","object-contain","p-1",3,"src","alt"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-1","bg-gray-200","dark:bg-gray-600","rounded","hover:bg-gray-300","dark:hover:bg-gray-500",3,"click"],[1,"w-8","text-center"],[1,"px-3","py-1","bg-red-500","text-white","rounded","hover:bg-red-600",3,"click"]],template:function(d,n){d&1&&(t(0,"div",0)(1,"h1",1),r(2,"Point of Sale"),i(),t(3,"div",2)(4,"div",3)(5,"h2",4),r(6,"Products"),i(),t(7,"div",5),u(8,J,15,10,"div",6),i()(),t(9,"div",7)(10,"h2",4),r(11,"Current Order"),i(),u(12,K,2,0,"div",8)(13,X,27,9,"div",9),i()()(),f(14,"div",10)),d&2&&(a(8),s("ngForOf",n.products),a(4),s("ngIf",n.cart.length===0),a(),s("ngIf",n.cart.length>0),a(),s("ngClass",F(4,A,!n.isSidebarCollapsed,n.isSidebarCollapsed)))},dependencies:[W,O,q,N,j,z,G,L,B,D,$],encapsulation:2})}}return o})();export{re as PosComponent};

import{Q as i,a as s,b as r,j as n}from"./chunk-O45W6FPX.js";var u=(()=>{class c{constructor(){this.subjects={products:new n(this.loadFromStorage("products")),orders:new n(this.loadFromStorage("orders")),users:new n(this.loadFromStorage("users")),customers:new n(this.loadFromStorage("customers"))},this.products$=this.subjects.products.asObservable(),this.orders$=this.subjects.orders.asObservable(),this.users$=this.subjects.users.asObservable(),this.customers$=this.subjects.customers.asObservable()}updateEntity(e,t){this.subjects[e].next(t),this.saveToStorage(e,t)}getEntity(e){return this.subjects[e].getValue()}addProduct(e){let t=Date.now(),a=r(s({},e),{lastUpdated:t}),o=[...this.getEntity("products"),a];this.updateEntity("products",o)}updateProduct(e){let t=Date.now(),a=this.getEntity("products").map(o=>o.id===e.id?r(s({},e),{lastUpdated:t}):o);this.updateEntity("products",a)}deleteProduct(e){let t=this.getEntity("products").filter(a=>a.id!==e);this.updateEntity("products",t)}addCustomer(e){let t=this.getEntity("customers");this.updateEntity("customers",[...t,e])}updateCustomer(e){let a=this.getEntity("customers").map(o=>o.id===e.id?r(s({},e),{lastUpdated:Date.now()}):o);this.updateEntity("customers",a)}deleteCustomer(e){let a=this.getEntity("customers").filter(o=>o.id!==e);this.updateEntity("customers",a)}addOrder(e){let t=Date.now(),a=r(s({},e),{lastUpdated:t}),o=[...this.getEntity("orders"),a];this.updateEntity("orders",o)}updateOrder(e){let t=Date.now(),a=this.getEntity("orders").map(o=>o.id===e.id?r(s({},e),{lastUpdated:t}):o);this.updateEntity("orders",a)}deleteOrder(e){let t=this.getEntity("orders").filter(a=>a.id!==e);this.updateEntity("orders",t)}saveToStorage(e,t){localStorage.setItem(e,JSON.stringify(t))}loadFromStorage(e){let t=localStorage.getItem(e);if(t)return JSON.parse(t);{let a=this.getInitialData(e);return this.saveToStorage(e,a),a}}getInitialData(e){switch(e){case"products":return[{id:1,name:"Samsung Galaxy A35",price:17299,category:"Smartphones",stock:50,barcode:"8806095531234",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:2,name:"Samsung Galaxy S23",price:30999,category:"Smartphones",stock:30,barcode:"8806094781234",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:3,name:"iPhone 16",price:41999,category:"Smartphones",stock:20,barcode:"190199123456",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:4,name:"OPPO Reno12F 5G",price:12999,category:"Smartphones",stock:40,barcode:"6944284678901",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:5,name:"MacBook Air 13-inch",price:38999,category:"Computing",stock:15,barcode:"194252123456",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:6,name:"Vodafone 160 GB ",price:200,category:"Data Packages",stock:100,barcode:"8901234567890",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:7,name:"Apple Watch Series 9",price:19999,category:"Wearables",stock:25,barcode:"190199123457",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:8,name:"Samsung Galaxy A34 ",price:14499,category:"Smartphones",stock:35,barcode:"8806094781235",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"},{id:9,name:"Vodafone 4G SIM Card",price:0,category:"SIM Cards",stock:500,barcode:"8901234567891",image:"https://eshop.vodafone.com.eg/ecommerce/api/asset/content/1311208718.png?contextRequest=%7B%22forceCatalogForFetch%22:false,%22forceFilterByCatalogIncludeInheritance%22:false,%22forceFilterByCatalogExcludeInheritance%22:false,%22applicationId%22:%2201H5FECVAV4YWT0NGQKXEN1T51%22,%22tenantId%22:%225DF1363059675161A85F576D%22%7D"}];case"orders":return[{id:1,items:[{productId:1,quantity:2,price:10}],total:20,status:"pending",paymentMethod:"cash",date:new Date().toISOString(),lastUpdated:Date.now()}];case"users":return[{id:1,username:"user1",password:"pass1",role:"admin",name:"User One",email:"user1@example.com",lastUpdated:Date.now()}];case"customers":return[{id:1,name:"Customer One",email:"customer1@example.com",phone:"123-456-7890",loyaltyPoints:0,lastUpdated:Date.now()}];default:return[]}}reset(){Object.keys(this.subjects).forEach(e=>{this.updateEntity(e,[])}),localStorage.clear()}exportState(){let e={products:this.getEntity("products"),orders:this.getEntity("orders"),users:this.getEntity("users"),customers:this.getEntity("customers")};return JSON.stringify(e,null,2)}importState(e){try{let t=JSON.parse(e);t.products&&this.updateEntity("products",t.products),t.orders&&this.updateEntity("orders",t.orders),t.users&&this.updateEntity("users",t.users),t.customers&&this.updateEntity("customers",t.customers)}catch(t){console.error("Error importing state:",t)}}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275prov=i({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();export{u as a};

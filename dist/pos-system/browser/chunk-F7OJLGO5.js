import{a as L}from"./chunk-66IKYEAE.js";import{b as N,e as W,h as D,i as $,j as B,l as G}from"./chunk-25YTLA6E.js";import{m as O,n as F,q,r as j}from"./chunk-H3FLNVXJ.js";import{$ as M,Aa as a,Ba as V,Qa as g,Sa as s,Va as t,Wa as i,Xa as w,Za as f,a as I,ab as x,b as P,bb as c,gb as r,hb as _,ia as p,ib as h,ja as u,jb as C,kb as k,lb as S,mb as E,ob as T,qb as y,sb as v,xa as b}from"./chunk-BGWHAZ6G.js";function z(d,m){if(d&1&&(t(0,"div",19),r(1),i()),d&2){let e=c().$implicit;a(),h(" Low Stock: ",e.stock," ")}}function U(d,m){if(d&1){let e=f();t(0,"div",9),x("click",function(){let n=p(e).$implicit,l=c();return u(l.addToCart(n))}),t(1,"div",10),w(2,"img",11),g(3,z,2,1,"div",12),i(),t(4,"div",13)(5,"h3",14),r(6),i(),t(7,"p",15),r(8),i(),t(9,"div",16)(10,"span",17),r(11),y(12,"number"),i(),t(13,"span",18),r(14),i()()()()}if(d&2){let e=m.$implicit;a(2),s("src",e.image||"assets/images/placeholder.png",b)("alt",e.name),a(),s("ngIf",e.stock<=10),a(3),_(e.name),a(2),_(e.category),a(3),h("EGP ",v(12,7,e.price,"1.2-2"),""),a(3),h("Stock: ",e.stock,"")}}function A(d,m){d&1&&(t(0,"div",20),r(1,"No items in cart"),i())}function H(d,m){if(d&1){let e=f();t(0,"div",33)(1,"div",34)(2,"div",35),w(3,"img",36),i(),t(4,"div")(5,"h4",37),r(6),i(),t(7,"p",38),r(8),y(9,"number"),i()()(),t(10,"div",39)(11,"button",40),x("click",function(){let n=p(e).$implicit,l=c(2);return u(l.decrement(n))}),r(12," - "),i(),t(13,"span",41),r(14),i(),t(15,"button",40),x("click",function(){let n=p(e).$implicit,l=c(2);return u(l.increment(n))}),r(16," + "),i(),t(17,"button",42),x("click",function(){let n=p(e).$implicit,l=c(2);return u(l.remove(n))}),r(18," \xD7 "),i()()()}if(d&2){let e=m.$implicit;a(3),s("src",e.image||"assets/images/placeholder.png",b)("alt",e.name),a(3),_(e.name),a(2),C("EGP ",v(9,6,e.price,"1.2-2")," x ",e.quantity,""),a(6),_(e.quantity)}}function J(d,m){if(d&1&&(t(0,"option",28),r(1),i()),d&2){let e=m.$implicit;s("ngValue",e.id),a(),C(" ",e.name," (",e.email,") ")}}function K(d,m){if(d&1){let e=f();t(0,"div",21),g(1,H,19,9,"div",22),t(2,"div",23)(3,"div",24)(4,"span"),r(5,"Total:"),i(),t(6,"span",25),r(7),y(8,"number"),i()(),t(9,"div",21)(10,"div")(11,"label",26),r(12,"Customer"),i(),t(13,"select",27),E("ngModelChange",function(n){p(e);let l=c();return S(l.selectedCustomerId,n)||(l.selectedCustomerId=n),u(n)}),t(14,"option",28),r(15,"Walk-in Customer"),i(),g(16,J,2,3,"option",29),i()(),t(17,"div")(18,"label",26),r(19,"Payment Method"),i(),t(20,"select",27),E("ngModelChange",function(n){p(e);let l=c();return S(l.paymentMethod,n)||(l.paymentMethod=n),u(n)}),t(21,"option",30),r(22,"Cash"),i(),t(23,"option",31),r(24,"Card"),i()()(),t(25,"button",32),x("click",function(){p(e);let n=c();return u(n.checkout())}),r(26," Checkout "),i()()()()}if(d&2){let e=c();a(),s("ngForOf",e.cart),a(6),h("EGP ",v(8,6,e.getTotal(),"1.2-2"),""),a(6),k("ngModel",e.selectedCustomerId),a(),s("ngValue",null),a(2),s("ngForOf",e.customers),a(4),k("ngModel",e.paymentMethod)}}var te=(()=>{class d{constructor(e){this.state=e,this.products=[],this.customers=[],this.cart=[],this.selectedCustomerId=null,this.paymentMethod="cash"}ngOnInit(){this.state.products$.subscribe(e=>{this.products=e,console.log(this.products)}),this.state.customers$.subscribe(e=>{this.customers=e})}addToCart(e){if(e.stock<=0){alert("This product is out of stock!");return}let o=this.cart.find(n=>n.id===e.id);if(o){if(o.quantity>=e.stock){alert("Cannot add more items. Stock limit reached!");return}o.quantity++}else this.cart.push(P(I({},e),{quantity:1}))}increment(e){if(e.quantity>=e.stock){alert("Cannot add more items. Stock limit reached!");return}e.quantity++}decrement(e){e.quantity>1&&e.quantity--}remove(e){this.cart=this.cart.filter(o=>o.id!==e.id)}getTotal(){return this.cart.reduce((e,o)=>e+o.price*o.quantity,0)}checkout(){if(this.cart.length===0)return;let e=this.cart.map(n=>({productId:n.id,quantity:n.quantity,price:n.price})),o={id:Date.now(),items:e,total:Number(this.getTotal()),status:"completed",paymentMethod:this.paymentMethod,date:new Date().toISOString(),customerId:this.selectedCustomerId||void 0};this.state.addOrder(o),alert("Checkout successful!"),this.cart=[],this.selectedCustomerId=null,this.paymentMethod="cash"}static{this.\u0275fac=function(o){return new(o||d)(V(L))}}static{this.\u0275cmp=M({type:d,selectors:[["app-pos"]],standalone:!0,features:[T],decls:14,vars:3,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"card","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-2","gap-4"],["class","bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow duration-200",3,"click",4,"ngFor","ngForOf"],["class","text-gray-500",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"bg-white","dark:bg-gray-700","rounded-lg","shadow-md","overflow-hidden","cursor-pointer","hover:shadow-lg","transition-shadow","duration-200",3,"click"],[1,"relative","h-40","bg-gray-100","dark:bg-gray-600"],[1,"w-full","h-full","object-contain","p-2",3,"src","alt"],["class","absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",4,"ngIf"],[1,"p-4"],[1,"font-medium","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"flex","justify-between","items-center"],[1,"text-lg","font-bold","text-[rgb(230,0,0)]"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"absolute","top-2","right-2","bg-red-500","text-white","text-xs","px-2","py-1","rounded-full"],[1,"text-gray-500"],[1,"space-y-4"],["class","flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",4,"ngFor","ngForOf"],[1,"mt-4","p-4","bg-gray-50","dark:bg-gray-700","rounded-lg"],[1,"flex","justify-between","font-bold","text-lg","mb-4"],[1,"text-[rgb(230,0,0)]"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["value","cash"],["value","card"],[1,"w-full","px-4","py-3","bg-[rgb(230,0,0)]","text-white","rounded-lg","hover:bg-red-700","font-medium",3,"click"],[1,"flex","justify-between","items-center","p-4","bg-gray-50","dark:bg-gray-700","rounded-lg"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","bg-gray-100","dark:bg-gray-600","rounded-lg","overflow-hidden"],[1,"w-full","h-full","object-contain","p-1",3,"src","alt"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-1","bg-gray-200","dark:bg-gray-600","rounded","hover:bg-gray-300","dark:hover:bg-gray-500",3,"click"],[1,"w-8","text-center"],[1,"px-3","py-1","bg-red-500","text-white","rounded","hover:bg-red-600",3,"click"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"h1",1),r(2,"Point of Sale"),i(),t(3,"div",2)(4,"div",3)(5,"h2",4),r(6,"Products"),i(),t(7,"div",5),g(8,U,15,10,"div",6),i()(),t(9,"div",3)(10,"h2",4),r(11,"Current Order"),i(),g(12,A,2,0,"div",7)(13,K,27,9,"div",8),i()()()),o&2&&(a(8),s("ngForOf",n.products),a(4),s("ngIf",n.cart.length===0),a(),s("ngIf",n.cart.length>0))},dependencies:[j,O,F,q,G,$,B,D,N,W],encapsulation:2})}}return d})();export{te as PosComponent};

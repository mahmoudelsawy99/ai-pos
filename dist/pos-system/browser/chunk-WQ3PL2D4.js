import{a as H}from"./chunk-RWMW3244.js";import{a as F,b as A,c as q,d as B,e as D,f as L,g as O,k as z,l as G}from"./chunk-G7KW3K4P.js";import{e as R}from"./chunk-Z3ZOT5D7.js";import{m as W,n as N,r as j}from"./chunk-VC7NPOL3.js";import{$ as E,Aa as l,Ba as M,Q as S,Qa as f,Sa as b,V as C,Va as e,Wa as i,Xa as y,Za as P,a as h,ab as m,b as v,bb as c,gb as r,hb as p,ia as s,ib as k,ja as u,kb as g,lb as x,mb as _,ob as V,rb as I,sb as T}from"./chunk-O45W6FPX.js";var J=(()=>{class o{constructor(t){this.state=t}getProducts(){return this.state.products$}addProduct(t){this.state.addProduct(t)}updateProduct(t){this.state.updateProduct(t)}deleteProduct(t){this.state.deleteProduct(t)}static{this.\u0275fac=function(d){return new(d||o)(C(H))}}static{this.\u0275prov=S({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function U(o,w){if(o&1){let t=P();e(0,"tr")(1,"td",13),r(2),i(),e(3,"td",13),r(4),i(),e(5,"td",13),r(6),i(),e(7,"td",13),r(8),i(),e(9,"td",14)(10,"button",15),m("click",function(){let n=s(t).$implicit,a=c();return u(a.openEdit(n))}),y(11,"i",16),i(),e(12,"button",17),m("click",function(){let n=s(t).$implicit,a=c();return u(a.deleteProduct(n.id))}),y(13,"i",18),i()()()}if(o&2){let t=w.$implicit;l(2),p(t.name),l(2),p(t.category),l(2),k("EGP ",t.price,""),l(2),p(t.stock)}}function X(o,w){if(o&1){let t=P();e(0,"div",19)(1,"div",20)(2,"h2",21),r(3),i(),e(4,"form",22),m("ngSubmit",function(){s(t);let n=c();return u(n.saveProduct())}),e(5,"div",23)(6,"label",24),r(7,"Name"),i(),e(8,"input",25),_("ngModelChange",function(n){s(t);let a=c();return x(a.modalProduct.name,n)||(a.modalProduct.name=n),u(n)}),i()(),e(9,"div",23)(10,"label",24),r(11,"Category"),i(),e(12,"input",26),_("ngModelChange",function(n){s(t);let a=c();return x(a.modalProduct.category,n)||(a.modalProduct.category=n),u(n)}),i()(),e(13,"div",23)(14,"label",24),r(15,"Price"),i(),e(16,"input",27),_("ngModelChange",function(n){s(t);let a=c();return x(a.modalProduct.price,n)||(a.modalProduct.price=n),u(n)}),i()(),e(17,"div",23)(18,"label",24),r(19,"Stock"),i(),e(20,"input",28),_("ngModelChange",function(n){s(t);let a=c();return x(a.modalProduct.stock,n)||(a.modalProduct.stock=n),u(n)}),i()(),e(21,"div",29)(22,"button",30),m("click",function(){s(t);let n=c();return u(n.closeModal())}),r(23,"Cancel"),i(),e(24,"button",31),r(25,"Save"),i()()()()()}if(o&2){let t=c();l(3),p(t.editingProduct?"Edit Product":"Add Product"),l(5),g("ngModel",t.modalProduct.name),l(4),g("ngModel",t.modalProduct.category),l(4),g("ngModel",t.modalProduct.price),l(4),g("ngModel",t.modalProduct.stock)}}var nt=(()=>{class o{constructor(t){this.productService=t,this.showModal=!1,this.editingProduct=null,this.modalProduct=this.getEmptyProduct(),this.products=[]}ngOnInit(){this.productService.getProducts().subscribe(t=>{this.products=t})}getEmptyProduct(){return{id:0,name:"",category:"",price:0,stock:0}}openAdd(){this.editingProduct=null,this.modalProduct=this.getEmptyProduct(),this.showModal=!0}openEdit(t){this.editingProduct=t,this.modalProduct=h({},t),this.showModal=!0}saveProduct(){if(this.editingProduct)this.productService.updateProduct(this.modalProduct);else{let t=Math.max(...this.products.map(d=>d.id),0)+1;this.productService.addProduct(v(h({},this.modalProduct),{id:t}))}this.closeModal()}deleteProduct(t){this.productService.deleteProduct(t)}closeModal(){this.showModal=!1}static{this.\u0275fac=function(d){return new(d||o)(M(J))}}static{this.\u0275cmp=E({type:o,selectors:[["app-products"]],standalone:!0,features:[V],decls:27,vars:5,consts:[[1,"container","mx-auto"],[1,"text-2xl","font-bold","mb-4"],[1,"card","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold"],[1,"btn-primary","px-4","py-2","bg-[rgb(230,0,0)]","text-white","rounded","hover:bg-red-700",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-700"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","dark:text-white"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",4,"ngIf"],[1,"px-6","py-4","text-gray-900","dark:text-white"],[1,"px-6","py-4","space-x-2"],["aria-label","Edit",1,"text-blue-600","hover:text-blue-800","bg-[rgb(230,0,0)]","text-white","px-3","py-1","rounded",3,"click"],[1,"fas","fa-pen"],["aria-label","Delete",1,"text-red-600","hover:text-red-800","bg-[rgb(230,0,0)]","text-white","px-3","py-1","rounded",3,"click"],[1,"fas","fa-trash"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black","bg-opacity-40"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-lg","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],[1,"block","mb-1"],["name","name","required","",1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],["name","category","required","",1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],["type","number","name","price","required","",1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],["type","number","name","stock","required","",1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2"],["type","button",1,"px-4","py-2","bg-gray-300","rounded","hover:bg-gray-400",3,"click"],["type","submit",1,"px-4","py-2","bg-[rgb(230,0,0)]","text-white","rounded","hover:bg-red-700"]],template:function(d,n){d&1&&(e(0,"div",0)(1,"h1",1),r(2),I(3,"translate"),i(),e(4,"div",2)(5,"div",3)(6,"h2",4),r(7,"Products"),i(),e(8,"button",5),m("click",function(){return n.openAdd()}),r(9,"Add Product"),i()(),e(10,"div",6)(11,"table",7)(12,"thead",8)(13,"tr")(14,"th",9),r(15,"Name"),i(),e(16,"th",9),r(17,"Category"),i(),e(18,"th",9),r(19,"Price"),i(),e(20,"th",9),r(21,"Stock"),i(),e(22,"th",9),r(23,"Actions"),i()()(),e(24,"tbody",10),f(25,U,14,4,"tr",11),i()()()(),f(26,X,26,5,"div",12),i()),d&2&&(l(2),p(T(3,3,"pos.products")),l(23),b("ngForOf",n.products),l(),b("ngIf",n.showModal))},dependencies:[j,W,N,G,L,F,O,A,q,z,D,B,R],encapsulation:2})}}return o})();export{nt as ProductsComponent};

import{a as u}from"./chunk-RWMW3244.js";import{l as P}from"./chunk-G7KW3K4P.js";import{m as k,n as w,o as T,r as F}from"./chunk-VC7NPOL3.js";import{$ as h,Aa as a,Ba as g,Q as f,Qa as x,Sa as l,Ua as b,V as v,Va as r,Wa as i,Za as S,ab as I,bb as m,gb as n,hb as c,ia as y,ib as p,ja as _,ob as O,rb as E,tb as C}from"./chunk-O45W6FPX.js";var D=(()=>{class t{constructor(e){this.state=e}getOrders(){return this.state.orders$}addOrder(e){this.state.addOrder(e)}updateOrder(e){this.state.updateOrder(e)}deleteOrder(e){this.state.deleteOrder(e)}static{this.\u0275fac=function(d){return new(d||t)(v(u))}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function N(t,s){t&1&&(r(0,"div",7),n(1,"No orders yet."),i())}function M(t,s){if(t&1){let e=S();r(0,"tr")(1,"td",13),n(2),i(),r(3,"td",13),n(4),E(5,"date"),i(),r(6,"td",13),n(7),i(),r(8,"td",13)(9,"span"),n(10),i()(),r(11,"td",14)(12,"button",15),I("click",function(){let o=y(e).index,$=m(2);return _($.toggleDetails(o))}),n(13),i()()()}if(t&2){let e=s.$implicit,d=s.index,o=m(2);a(2),c(e.id),a(2),c(C(5,7,e.date,"short")),a(3),p("EGP ",e.total,""),a(2),b(o.getStatusClass(e.status)),a(),c(e.status),a(3),p(" ",o.expandedIndex===d?"Hide":"Show"," ")}}function G(t,s){if(t&1&&(r(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10),n(4,"Order ID"),i(),r(5,"th",10),n(6,"Date"),i(),r(7,"th",10),n(8,"Total"),i(),r(9,"th",10),n(10,"Status"),i(),r(11,"th",10),n(12,"Details"),i()()(),r(13,"tbody",11),x(14,M,14,10,"tr",12),i()()),t&2){let e=m();a(14),l("ngForOf",e.orders)}}function V(t,s){if(t&1&&(r(0,"tr")(1,"td",22),n(2),i(),r(3,"td",22),n(4),i(),r(5,"td",22),n(6),i(),r(7,"td",22),n(8),i()()),t&2){let e=s.$implicit,d=m(3);a(2),c(d.getProductName(e.productId)),a(2),c(e.quantity),a(2),p("EGP ",e.price,""),a(2),p("EGP ",e.price*e.quantity,"")}}function q(t,s){if(t&1&&(r(0,"div")(1,"div",19),n(2,"Items:"),i(),r(3,"table",20)(4,"thead")(5,"tr")(6,"th",21),n(7,"Product"),i(),r(8,"th",21),n(9,"Quantity"),i(),r(10,"th",21),n(11,"Price"),i(),r(12,"th",21),n(13,"Subtotal"),i()()(),r(14,"tbody"),x(15,V,9,4,"tr",12),i()()()),t&2){let e=m(2);a(15),l("ngForOf",e.currentOrder.items)}}function B(t,s){if(t&1&&(r(0,"div",23)(1,"div",24),n(2,"Customer:"),i(),r(3,"div",22),n(4),i()()),t&2){let e=m(2);a(4),p(" ",e.getCustomerName(e.currentOrder.customerId)," ")}}function H(t,s){if(t&1&&(r(0,"div",16),x(1,q,16,1,"div",17)(2,B,5,1,"div",18),i()),t&2){let e=m();a(),l("ngIf",e.currentOrder.items&&e.currentOrder.items.length>0),a(),l("ngIf",e.currentOrder.customerId)}}var U=(()=>{class t{get currentOrder(){return this.expandedIndex===null?null:this.orders[this.expandedIndex]||null}constructor(e,d){this.orderService=e,this.state=d,this.orders=[],this.expandedIndex=null,this.products=[],this.customers=[]}ngOnInit(){this.orderService.getOrders().subscribe(e=>{this.orders=e}),this.state.products$.subscribe(e=>{this.products=e}),this.state.customers$.subscribe(e=>{this.customers=e})}toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e}getProductName(e){let d=this.products.find(o=>o.id===e);return d?d.name:"Product #"+e}getCustomerName(e){let d=this.customers.find(o=>o.id===e);return d?`${d.name} (${d.email})`:"Customer #"+e}getStatusClass(e){return`px-2 py-1 rounded-full text-xs font-medium ${{pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"}`}static{this.\u0275fac=function(d){return new(d||t)(g(D),g(u))}}static{this.\u0275cmp=h({type:t,selectors:[["app-orders"]],standalone:!0,features:[O],decls:9,vars:3,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-4"],[1,"card","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow"],[1,"text-xl","font-semibold","mb-4"],["class","text-gray-500 dark:text-gray-400",4,"ngIf"],["class","min-w-full divide-y divide-gray-200 dark:divide-gray-700",4,"ngIf"],["class","mt-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",4,"ngIf"],[1,"text-gray-500","dark:text-gray-400"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-700"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","dark:text-white"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","text-gray-900","dark:text-white"],[1,"px-6","py-4"],[1,"text-blue-600","hover:underline",3,"click"],[1,"mt-4","p-4","bg-gray-50","dark:bg-gray-900","rounded-lg"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"font-semibold","mb-2","text-gray-700","dark:text-white"],[1,"min-w-full","mb-2"],[1,"text-xs","font-medium","text-gray-500","uppercase","tracking-wider","dark:text-white"],[1,"text-gray-900","dark:text-white"],[1,"mt-4"],[1,"font-semibold","text-gray-700","dark:text-white"]],template:function(d,o){d&1&&(r(0,"div",0)(1,"h1",1),n(2,"Orders"),i(),r(3,"div",2)(4,"h2",3),n(5,"Order List"),i(),x(6,N,2,0,"div",4)(7,G,15,1,"table",5)(8,H,3,2,"div",6),i()()),d&2&&(a(6),l("ngIf",o.orders.length===0),a(),l("ngIf",o.orders.length>0),a(),l("ngIf",o.currentOrder))},dependencies:[F,k,w,T,P],encapsulation:2})}}return t})();export{U as OrdersComponent};
